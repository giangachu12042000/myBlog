{"ast":null,"code":"var __jsx = React.createElement;\nimport React from 'react';\nimport { withRouter } from 'next/router';\nimport axios from '../../utils';\nimport Auth from '../../localStorege';\nimport ModalV from '../components/modal';\n\nclass LoginPage extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      form: {},\n      sucess: null,\n      showSucess: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.opentSuccess = this.opentSuccess.bind(this);\n    this.handleSucces = this.handleSucces.bind(this);\n  }\n\n  handleChange(event) {\n    let {\n      form\n    } = this.state;\n    const value = event.target.value;\n    const name = event.target.name;\n    form[name] = value;\n    this.setState({\n      form\n    });\n  }\n\n  handleSucces(param) {\n    let {\n      showSucess\n    } = this.state;\n    showSucess = param;\n    this.setState({\n      showSucess\n    });\n    let close = false;\n    setTimeout(() => {\n      showSucess = close;\n      this.setState({\n        showSucess\n      });\n      console.log(this.state.showSucess, '=============??');\n    }, 4000);\n  }\n\n  opentSuccess(param) {\n    let {\n      sucess\n    } = this.state;\n    sucess = param;\n    this.setState({\n      sucess\n    });\n  }\n\n  handleSubmit(event) {\n    event.preventDefault();\n    const {\n      form\n    } = this.state;\n\n    try {\n      axios.post(\"/login\", {\n        form\n      }).then(res => {\n        // let param = res.data.message;\n        if (res.data) {\n          const token = res.data;\n          console.log(token, '============');\n\n          if (token.code == 1) {\n            Auth.authenticateUser(token.data);\n          } else {\n            this.opentSuccess(token.message);\n            this.handleSucces(true);\n          }\n        }\n      });\n    } catch (err) {\n      throw err;\n    }\n  }\n\n  render() {\n    // const token = Auth.getToken();\n    // if(token){\n    // }\n    const {\n      sucess,\n      showSucess\n    } = this.state;\n    return __jsx(\"div\", {\n      className: \"row\"\n    }, __jsx(\"div\", {\n      className: \"col-md-6\"\n    }, __jsx(ModalV, {\n      showSucess: showSucess,\n      handleSucces: this.handleSucces,\n      sucess: sucess\n    }), __jsx(\"form\", {\n      method: \"post\",\n      encType: \"multipart/form-data\",\n      onSubmit: this.handleSubmit\n    }, __jsx(\"div\", {\n      className: \"form-group\"\n    }, __jsx(\"label\", null, \"Email \"), __jsx(\"input\", {\n      type: \"email\",\n      name: \"email\",\n      className: \"form-control\",\n      onChange: this.handleChange\n    })), __jsx(\"div\", {\n      className: \"form-group\"\n    }, __jsx(\"label\", null, \"Password \"), __jsx(\"input\", {\n      name: \"password\",\n      type: \"text\",\n      onChange: this.handleChange,\n      className: \"form-control\"\n    })), __jsx(\"div\", {\n      className: \"btn-group\"\n    }, __jsx(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-primary\"\n    }, \"\\u0110\\u0103ng nh\\u1EADp\")))));\n  }\n\n}\n\nexport default withRouter(LoginPage);","map":null,"metadata":{},"sourceType":"module"}