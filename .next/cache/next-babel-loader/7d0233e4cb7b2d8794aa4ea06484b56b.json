{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Desktop\\\\blog_client\\\\app\\\\admin\\\\comments\\\\index.js\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { withRouter } from 'next/router';\nimport axios from '../../utils';\nimport ModalV from '../components/modal';\nimport CommentAdd from './commentAdd';\nimport CommentV from './commentV';\n\nclass Comment extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      modal: false,\n      comments: [],\n      comment: null,\n      modleShow: false,\n      handleGetId: null,\n      modal: false,\n      message: null,\n      replyId: null\n    };\n    this.handleModal = this.handleModal.bind(this);\n    this.fetchComment = this.fetchComment.bind(this);\n    this.handleDelete = this.handleDelete.bind(this);\n    this.deleteConfirm = this.deleteConfirm.bind(this);\n    this.handleRemove = this.handleRemove.bind(this);\n    this.handleModal = this.handleModal.bind(this);\n    this.handleReply = this.handleReply.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleModal(param) {\n    let {\n      modal\n    } = this.state;\n    modal = param;\n    this.setState({\n      modal\n    });\n  }\n\n  fetchComment() {\n    let {\n      comments\n    } = this.state;\n    axios.get('/comment').then(res => {\n      const {\n        data\n      } = res.data;\n      comments = data;\n      this.setState({\n        comments\n      }); // console.log(comments,'=============>fetch cmo')\n    });\n  }\n\n  deleteConfirm(param) {\n    let {\n      modleShow\n    } = this.state;\n    modleShow = param;\n    this.setState({\n      modleShow\n    });\n  }\n\n  handleDelete(param) {\n    let {\n      handleGetId\n    } = this.state;\n    handleGetId = param;\n    this.setState({\n      handleGetId\n    });\n  }\n\n  handleRemove(param) {\n    const id = param;\n    this.deleteConfirm(true);\n\n    try {\n      axios.delete(`/comment/delete/${id}`).then(res => {\n        if (res.data) {\n          this.fetchComment();\n        }\n      });\n    } catch (err) {\n      throw err;\n    }\n  }\n\n  handleModal(param) {\n    let {\n      modal\n    } = this.state;\n    modal = param;\n    this.setState({\n      modal\n    });\n  }\n\n  handleReply(param) {\n    let {\n      comment\n    } = this.state;\n    comment = param;\n    this.setState({\n      comment\n    });\n  }\n\n  handleChange(e) {\n    let {\n      message\n    } = this.state;\n    message = e.target.value;\n    this.setState({\n      message\n    });\n    console.log(message, '=========d====>>');\n  }\n\n  handleSubmit() {\n    event.preventDefault();\n    let {\n      message\n    } = this.state;\n    console.log(message, '=====================+>>');\n    axios.put(`/comment/reply/${message}`, {\n      message\n    }).then(res => {\n      console.log(res.data, '=============>>');\n    });\n  }\n\n  componentDidMount() {\n    this.fetchComment();\n  }\n\n  render() {\n    const {\n      modal,\n      comments,\n      modleShow,\n      handleGetId,\n      comment\n    } = this.state;\n    return __jsx(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }\n    }, __jsx(\"div\", {\n      className: \"col-md-12 text-right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 17\n      }\n    }, __jsx(\"button\", {\n      type: \"button\",\n      onClick: () => {\n        this.handleModal(true);\n      },\n      className: \"btn btn-primary col-md-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 21\n      }\n    }, \"them\")), __jsx(CommentV, {\n      comments: comments,\n      deleteConfirm: this.deleteConfirm,\n      handleDelete: this.handleDelete,\n      handleModal: this.handleModal,\n      handleReply: this.handleReply,\n      modal: modal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }\n    }), __jsx(\"div\", {\n      className: \"col-md-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }\n    }, modal ? __jsx(CommentAdd, {\n      handleModal: this.handleModal,\n      handleSubmit: this.handleSubmit,\n      handleChange: this.handleChange,\n      comment: comment,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 21\n      }\n    }) : ''), __jsx(ModalV, {\n      modleShow: modleShow,\n      handleRemove: this.handleRemove,\n      handleGetId: handleGetId,\n      deleteConfirm: this.deleteConfirm,\n      handleModal: this.handleModal,\n      modal: modal,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nexport default withRouter(Comment);","map":{"version":3,"sources":["C:/Users/Admin/Desktop/blog_client/app/admin/comments/index.js"],"names":["React","withRouter","axios","ModalV","CommentAdd","CommentV","Comment","Component","constructor","props","state","modal","comments","comment","modleShow","handleGetId","message","replyId","handleModal","bind","fetchComment","handleDelete","deleteConfirm","handleRemove","handleReply","handleSubmit","handleChange","param","setState","get","then","res","data","id","delete","err","e","target","value","console","log","event","preventDefault","put","componentDidMount","render"],"mappings":"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","sourcesContent":["\r\n \r\nimport React from 'react';\r\nimport {withRouter} from 'next/router';\r\nimport axios from '../../utils'; \r\nimport ModalV from '../components/modal';\r\nimport CommentAdd from './commentAdd';\r\nimport CommentV from './commentV';\r\n\r\nclass Comment extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state =  {\r\n            modal:false,\r\n            comments : [],\r\n            comment: null,\r\n            modleShow:false,\r\n            handleGetId: null,\r\n            modal: false,\r\n            message: null,\r\n            replyId: null\r\n        }\r\n        this.handleModal = this.handleModal.bind(this);\r\n        this.fetchComment = this.fetchComment.bind(this);\r\n        this.handleDelete = this.handleDelete.bind(this);\r\n        this.deleteConfirm = this.deleteConfirm.bind(this);\r\n        this.handleRemove = this.handleRemove.bind(this);\r\n        this.handleModal = this.handleModal.bind(this);\r\n        this.handleReply = this.handleReply.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.handleChange = this.handleChange.bind(this);\r\n    }\r\n\r\n    handleModal(param){\r\n        let {modal} = this.state;\r\n        modal = param;\r\n        this.setState({modal});\r\n    }\r\n    fetchComment(){\r\n        let {comments} = this.state;\r\n        axios.get('/comment')\r\n        .then(res =>{\r\n            const {data} = res.data;\r\n            comments = data;\r\n            this.setState({comments});\r\n            // console.log(comments,'=============>fetch cmo')\r\n        })\r\n    }\r\n    deleteConfirm(param){\r\n        let {modleShow} = this.state;\r\n        modleShow = param; \r\n        this.setState({modleShow});\r\n         \r\n    }\r\n    handleDelete(param){\r\n        let {handleGetId} = this.state;\r\n        handleGetId = param;\r\n        this.setState({handleGetId});\r\n    }\r\n    handleRemove(param){\r\n        const id = param; \r\n        this.deleteConfirm(true); \r\n        try{\r\n            axios.delete(`/comment/delete/${id}`)\r\n             .then(res => {\r\n                if(res.data){\r\n                    this.fetchComment();\r\n                }\r\n             })\r\n         }catch(err){ \r\n             throw err \r\n         }\r\n    }\r\n    handleModal(param){\r\n        let {modal} = this.state;\r\n        modal = param;\r\n        this.setState({modal});\r\n    }\r\n    handleReply(param){\r\n        let {comment} = this.state;\r\n        comment = param;\r\n        this.setState({comment});\r\n    }\r\n    handleChange(e){\r\n        let {message} = this.state;\r\n        message = e.target.value;\r\n        this.setState({message});\r\n        console.log(message,'=========d====>>')\r\n    }\r\n    handleSubmit(){\r\n        event.preventDefault();\r\n        let {message} = this.state;\r\n        console.log(message,'=====================+>>')\r\n        axios.put(`/comment/reply/${message}`,{message})\r\n        .then(res =>{\r\n            console.log(res.data,'=============>>')\r\n        })\r\n    }\r\n    componentDidMount(){ \r\n        this.fetchComment()\r\n    }\r\n    render(){ \r\n        const {modal, comments, modleShow, handleGetId, comment} = this.state;\r\n        return(\r\n            <div className=\"row\"> \r\n                <div className=\"col-md-12 text-right\">\r\n                    <button type=\"button\" onClick={()=>{this.handleModal(true) }} className=\"btn btn-primary col-md-1\">them</button>\r\n                </div> \r\n                <CommentV\r\n                    comments = {comments} deleteConfirm ={this.deleteConfirm}\r\n                    handleDelete={this.handleDelete} handleModal = {this.handleModal}\r\n                    handleReply = {this.handleReply}\r\n                    modal = {modal}\r\n                /> \r\n                <div className=\"col-md-12\">\r\n                    { modal ?\r\n                    <CommentAdd \r\n                    handleModal={this.handleModal} handleSubmit={this.handleSubmit}\r\n                    handleChange={this.handleChange} comment = {comment} /> : ''\r\n                    }\r\n                </div>\r\n                <ModalV \r\n                    modleShow={modleShow} handleRemove ={this.handleRemove}\r\n                    handleGetId={handleGetId} deleteConfirm ={this.deleteConfirm}\r\n                    handleModal = {this.handleModal}\r\n                    modal = {modal}\r\n                />\r\n            </div>\r\n        )\r\n    }\r\n} \r\nexport default withRouter(Comment)"]},"metadata":{},"sourceType":"module"}